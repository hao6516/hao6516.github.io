<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Reactæœ‰å“ªäº›å¸¸ç”¨çš„Hooks</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.9a2d1e15.css" as="style"><link rel="preload" href="/assets/js/app.92ecfa68.js" as="script"><link rel="preload" href="/assets/js/2.74d46d30.js" as="script"><link rel="preload" href="/assets/js/1.faf4e304.js" as="script"><link rel="preload" href="/assets/js/24.3fb61556.js" as="script"><link rel="prefetch" href="/assets/js/10.e4db72a5.js"><link rel="prefetch" href="/assets/js/11.ceaacd31.js"><link rel="prefetch" href="/assets/js/12.e4c3a1e8.js"><link rel="prefetch" href="/assets/js/13.7b150f09.js"><link rel="prefetch" href="/assets/js/14.aa8f92ff.js"><link rel="prefetch" href="/assets/js/15.219d12dc.js"><link rel="prefetch" href="/assets/js/16.5c52c558.js"><link rel="prefetch" href="/assets/js/17.9478cbb7.js"><link rel="prefetch" href="/assets/js/18.d0f617d0.js"><link rel="prefetch" href="/assets/js/19.9a38c1d4.js"><link rel="prefetch" href="/assets/js/20.9a3ed69c.js"><link rel="prefetch" href="/assets/js/21.881cd228.js"><link rel="prefetch" href="/assets/js/22.9a166501.js"><link rel="prefetch" href="/assets/js/23.b5e425ae.js"><link rel="prefetch" href="/assets/js/25.b07dc0f7.js"><link rel="prefetch" href="/assets/js/26.171cf097.js"><link rel="prefetch" href="/assets/js/27.3d4c4f20.js"><link rel="prefetch" href="/assets/js/28.a348176d.js"><link rel="prefetch" href="/assets/js/29.52eb0d75.js"><link rel="prefetch" href="/assets/js/3.681856a3.js"><link rel="prefetch" href="/assets/js/30.6b97fcc4.js"><link rel="prefetch" href="/assets/js/31.037aeae0.js"><link rel="prefetch" href="/assets/js/32.1b197c5a.js"><link rel="prefetch" href="/assets/js/33.9d0bc93a.js"><link rel="prefetch" href="/assets/js/34.683886a4.js"><link rel="prefetch" href="/assets/js/35.43d20ab3.js"><link rel="prefetch" href="/assets/js/36.95d95872.js"><link rel="prefetch" href="/assets/js/37.01380c59.js"><link rel="prefetch" href="/assets/js/38.f296ac33.js"><link rel="prefetch" href="/assets/js/39.1cd14d99.js"><link rel="prefetch" href="/assets/js/4.44de58f0.js"><link rel="prefetch" href="/assets/js/40.7e25c618.js"><link rel="prefetch" href="/assets/js/41.af808945.js"><link rel="prefetch" href="/assets/js/42.0ff5a222.js"><link rel="prefetch" href="/assets/js/43.b856d5e8.js"><link rel="prefetch" href="/assets/js/44.5f07d81d.js"><link rel="prefetch" href="/assets/js/45.72436fc5.js"><link rel="prefetch" href="/assets/js/46.f71032a4.js"><link rel="prefetch" href="/assets/js/47.5e5fc6c3.js"><link rel="prefetch" href="/assets/js/5.28b22fdc.js"><link rel="prefetch" href="/assets/js/6.fcbc928e.js"><link rel="prefetch" href="/assets/js/7.a9ed049a.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.5e19b665.js">
    <link rel="stylesheet" href="/assets/css/0.styles.9a2d1e15.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  æ¦‚è¿°
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue å­¦ä¹ ç¬”è®°" class="dropdown-title"><span class="title">Vue å­¦ä¹ ç¬”è®°</span> <span class="arrow down"></span></button> <button type="button" aria-label="Vue å­¦ä¹ ç¬”è®°" class="mobile-dropdown-title"><span class="title">Vue å­¦ä¹ ç¬”è®°</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/vue/test03.html" class="nav-link">
  ç¬”è®°
</a></li><li class="dropdown-item"><!----> <a href="https://www.baidu.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  å…¶å®ƒé“¾æ¥
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Typescript å­¦ä¹ ç¬”è®°" class="dropdown-title"><span class="title">Typescript å­¦ä¹ ç¬”è®°</span> <span class="arrow down"></span></button> <button type="button" aria-label="Typescript å­¦ä¹ ç¬”è®°" class="mobile-dropdown-title"><span class="title">Typescript å­¦ä¹ ç¬”è®°</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/ts/" class="nav-link">
  ç¬”è®°
</a></li><li class="dropdown-item"><!----> <a href="https://www.baidu.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  å…¶å®ƒé“¾æ¥
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  æ¦‚è¿°
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue å­¦ä¹ ç¬”è®°" class="dropdown-title"><span class="title">Vue å­¦ä¹ ç¬”è®°</span> <span class="arrow down"></span></button> <button type="button" aria-label="Vue å­¦ä¹ ç¬”è®°" class="mobile-dropdown-title"><span class="title">Vue å­¦ä¹ ç¬”è®°</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/vue/test03.html" class="nav-link">
  ç¬”è®°
</a></li><li class="dropdown-item"><!----> <a href="https://www.baidu.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  å…¶å®ƒé“¾æ¥
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Typescript å­¦ä¹ ç¬”è®°" class="dropdown-title"><span class="title">Typescript å­¦ä¹ ç¬”è®°</span> <span class="arrow down"></span></button> <button type="button" aria-label="Typescript å­¦ä¹ ç¬”è®°" class="mobile-dropdown-title"><span class="title">Typescript å­¦ä¹ ç¬”è®°</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/ts/" class="nav-link">
  ç¬”è®°
</a></li><li class="dropdown-item"><!----> <a href="https://www.baidu.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  å…¶å®ƒé“¾æ¥
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>html</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/html/html-01.html" class="sidebar-link">one</a></li><li><a href="/guide/html/html-02.html" class="sidebar-link">two</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>css</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/css/css-01.html" class="sidebar-link">cssç›’å­æ¨¡å‹</a></li><li><a href="/guide/css/css-02.html" class="sidebar-link">cssé€‰æ‹©å™¨æœ‰å“ªäº›ï¼Œä¼˜å…ˆçº§ï¼Œä»¥åŠç»§æ‰¿</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>æ‰‹å†™ä»£ç ç³»åˆ—</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/æ‰‹å†™ä»£ç ç³»åˆ—/code-01.html" class="sidebar-link">æ•°ç»„å»é‡</a></li><li><a href="/guide/æ‰‹å†™ä»£ç ç³»åˆ—/code-02.html" class="sidebar-link">å¾…å®š</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="reactæœ‰å“ªäº›å¸¸ç”¨çš„hooks"><a href="#reactæœ‰å“ªäº›å¸¸ç”¨çš„hooks" class="header-anchor">#</a> Reactæœ‰å“ªäº›å¸¸ç”¨çš„Hooks</h1> <h2 id="_1-usestate"><a href="#_1-usestate" class="header-anchor">#</a> 1. useState</h2> <p>æ¥å£°æ˜çŠ¶æ€å˜é‡</p> <p>åˆå§‹åŒ–</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> setState<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span>initialState<span class="token punctuation">)</span>
</code></pre></div><p>æ›´æ–°(ä¸¤ç§æ›´æ–°æ–¹å¼)</p> <ol><li>ä¼ é€’æ›´æ–°å‡½æ•°ï¼ˆå¼ºçƒˆæ¨èï¼‰</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token parameter">age</span> <span class="token operator">=&gt;</span> age <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
</code></pre></div><p>Reactä¼šå°†æ›´æ–°å‡½æ•°æ”¾å…¥é˜Ÿåˆ—ä¸­ï¼Œç„¶ååœ¨ä¸‹ä¸€æ¬¡æ¸²æŸ“æœŸé—´ï¼Œå®ƒå°†æŒ‰ç…§ç›¸åŒçš„é¡ºåºè°ƒç”¨ä»–ä»¬</p> <ol start="2"><li>ç›´æ¥ä¼ é€’ä¸‹ä¸€ä¸ªçŠ¶æ€</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">setAge</span><span class="token punctuation">(</span>age <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
</code></pre></div><p>æ­¤æ—¶å¦‚æœæ‰§è¡Œä¸‹é¢å‡½æ•°ï¼Œåˆå§‹ageä¸º25</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">change</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setAge</span><span class="token punctuation">(</span>age <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token function">setAge</span><span class="token punctuation">(</span>age <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token function">setAge</span><span class="token punctuation">(</span>age <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä¼šå‘ç°ç»“æœä¸º26</p> <h2 id="_2-usereducer"><a href="#_2-usereducer" class="header-anchor">#</a> 2. useReducer</h2> <p>ç±»ä¼¼äºreduxï¼Œå…¶å®å¯ä»¥çœ‹æˆä¸€ä¸ªå°å‹çš„redux</p> <p>åœºæ™¯ï¼šå¦‚æœçŠ¶æ€å˜å¾—è¶Šæ¥çº¦å¤æ‚ï¼ŒuseStateå˜å¾—éå¸¸ç¹çæ—¶ï¼Œä½¿ç”¨useReduceræ¥ç®¡ç†çŠ¶æ€ï¼Œå¯ä»¥ä½¿å¾—çŠ¶æ€æ›´æ–°æ›´åŠ å¯æ§ï¼Œå¯é¢„æµ‹ã€‚</p> <p>ä»£ç ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useReducer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span>
<span class="token comment">// 1.å®šä¹‰ä¸€ä¸ªreducerå‡½æ•°ï¼ˆæ ¹æ®ä¸åŒçš„actionè¿”å›ä¸åŒçš„æ–°çŠ¶æ€ï¼‰</span>
<span class="token comment">// 2.åœ¨ç»„ä»¶ä¸­è°ƒç”¨useReducerï¼Œå¹¶ä¼ å…¥reducerå‡½æ•°å’ŒçŠ¶æ€çš„åˆå§‹å€¼</span>
<span class="token comment">// 3.äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œé€šè¿‡dispatchå‡½æ•°åˆ†æ´¾ä¸€ä¸ªactionå¯¹è±¡ï¼ˆé€šçŸ¥reducerè¦è¿”å›å“ªä¸ªæ–°çŠ¶æ€å¹¶æ¸²æŸ“UIï¼‰</span>
<span class="token keyword">function</span> <span class="token function">reducer</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">state</span><span class="token operator">:</span> number<span class="token punctuation">,</span> <span class="token literal-property property">action</span><span class="token operator">:</span> Action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">&quot;INCR&quot;</span><span class="token operator">:</span>
      <span class="token keyword">return</span> state <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token keyword">case</span> <span class="token string">&quot;DEC&quot;</span><span class="token operator">:</span>
      <span class="token keyword">return</span> state <span class="token operator">-</span> <span class="token number">1</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
      <span class="token keyword">return</span> state
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span><span class="token punctuation">{</span>state<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;INCR&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">+</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;DEC&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">-</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

type Action <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;INCR&quot;</span> <span class="token punctuation">}</span> <span class="token operator">|</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;DEC&quot;</span> <span class="token punctuation">}</span>
</code></pre></div><h2 id="_3-usecallback"><a href="#_3-usecallback" class="header-anchor">#</a> 3. useCallback</h2> <p>å¸¸ç”¨ä¸React.memoç»“åˆèµ·æ¥ä½¿ç”¨ï¼Œç”¨æ¥è·³è¿‡å­ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>useCallBack<span class="token punctuation">,</span>memo<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token comment">/**çˆ¶ç»„ä»¶**/</span>
<span class="token keyword">const</span> <span class="token function-variable function">Parent</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>parentState<span class="token punctuation">,</span>setParentState<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//çˆ¶ç»„ä»¶çš„state</span>
    
    <span class="token comment">//éœ€è¦ä¼ å…¥å­ç»„ä»¶çš„å‡½æ•°</span>
    <span class="token keyword">const</span> <span class="token function-variable function">toChildFun</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;éœ€è¦ä¼ å…¥å­ç»„ä»¶çš„å‡½æ•°&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">...</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setParentState</span><span class="token punctuation">(</span><span class="token parameter">val</span> <span class="token operator">=&gt;</span> val<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
              ç‚¹å‡»æˆ‘æ”¹å˜çˆ¶ç»„ä»¶ä¸­ä¸Childç»„ä»¶æ— å…³çš„state
          <span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>
          <span class="token comment">//å°†çˆ¶ç»„ä»¶çš„å‡½æ•°ä¼ å…¥å­ç»„ä»¶</span>
          <span class="token operator">&lt;</span>Child fun<span class="token operator">=</span><span class="token punctuation">{</span>toChildFun<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Child<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">/**è¢«memoä¿æŠ¤çš„å­ç»„ä»¶**/</span>
<span class="token keyword">const</span> Child <span class="token operator">=</span> <span class="token function">memo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    consolo<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;æˆ‘è¢«æ‰“å°äº†å°±è¯´æ˜å­ç»„ä»¶é‡æ–°æ„å»ºäº†&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><p>å½“æˆ‘ä»¬ç‚¹å‡»çˆ¶ç»„ä»¶çš„æŒ‰é’®æ—¶ï¼Œçˆ¶ç»„ä»¶ä¸­çš„stateä¼šå‘ç”Ÿæ”¹å˜ï¼Œä½†å’‹ä¸€çœ‹è¯¥stateä¸å­ç»„ä»¶æ²¡ç”¨åŠæ¯›é’±å…³ç³»ï¼Œå­ç»„ä»¶å†…éƒ¨é‚£ä¸€æ®µè¯ä¹Ÿé‡æ–°æ‰“å°äº†ï¼Œè¿™è¯´æ˜å­ç»„ä»¶è¢«é‡æ–°æ¸²æŸ“äº†ï¼Œæ­¤æ—¶éœ€è¦å¼•å…¥useCallback</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>useCallBack<span class="token punctuation">,</span>memo<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token comment">/**çˆ¶ç»„ä»¶**/</span>
<span class="token keyword">const</span> <span class="token function-variable function">Parent</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>parentState<span class="token punctuation">,</span>setParentState<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//çˆ¶ç»„ä»¶çš„state</span>
    
    <span class="token comment">//éœ€è¦ä¼ å…¥å­ç»„ä»¶çš„å‡½æ•°</span>
    <span class="token comment">//åªæœ‰è¿™é‡Œå’Œä¸Šä¸€ä¸ªç¤ºä¾‹ä¸ä¸€æ ·ï¼ï¼</span>
    <span class="token comment">//åªæœ‰è¿™é‡Œå’Œä¸Šä¸€ä¸ªç¤ºä¾‹ä¸ä¸€æ ·ï¼ï¼</span>
    <span class="token comment">//åªæœ‰è¿™é‡Œå’Œä¸Šä¸€ä¸ªç¤ºä¾‹ä¸ä¸€æ ·ï¼ï¼</span>
    <span class="token comment">//åªæœ‰è¿™é‡Œå’Œä¸Šä¸€ä¸ªç¤ºä¾‹ä¸ä¸€æ ·ï¼ï¼</span>
    <span class="token comment">//åªæœ‰è¿™é‡Œå’Œä¸Šä¸€ä¸ªç¤ºä¾‹ä¸ä¸€æ ·ï¼ï¼</span>
    <span class="token comment">//åªæœ‰è¿™é‡Œå’Œä¸Šä¸€ä¸ªç¤ºä¾‹ä¸ä¸€æ ·ï¼ï¼</span>
    <span class="token keyword">const</span> toChildFun <span class="token operator">=</span> <span class="token function">useCallBack</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;éœ€è¦ä¼ å…¥å­ç»„ä»¶çš„å‡½æ•°&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">...</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setParentState</span><span class="token punctuation">(</span><span class="token parameter">val</span> <span class="token operator">=&gt;</span> val<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
              ç‚¹å‡»æˆ‘æ”¹å˜çˆ¶ç»„ä»¶ä¸­ä¸Childç»„ä»¶æ— å…³çš„state
          <span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>
          <span class="token comment">//å°†çˆ¶ç»„ä»¶çš„å‡½æ•°ä¼ å…¥å­ç»„ä»¶</span>
          <span class="token operator">&lt;</span>Child fun<span class="token operator">=</span><span class="token punctuation">{</span>toChildFun<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Child<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">/**è¢«memoä¿æŠ¤çš„å­ç»„ä»¶**/</span>
<span class="token keyword">const</span> Child <span class="token operator">=</span> <span class="token function">memo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    consolo<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;æˆ‘è¢«æ‰“å°äº†å°±è¯´æ˜å­ç»„ä»¶é‡æ–°æ„å»ºäº†&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>


</code></pre></div><h2 id="_4-usememo"><a href="#_4-usememo" class="header-anchor">#</a> 4. useMemo</h2> <p>å®˜æ–¹è§£é‡Šï¼šè·³è¿‡ä»£ä»·æ˜‚è´µçš„é‡æ–°è®¡ç®—ã€‚å³ç»„ä»¶æ¯æ¬¡é‡æ–°æ¸²æŸ“çš„æ—¶å€™ç¼“å­˜è®¡ç®—ç»“æœ</p> <p>å°æ —å­ğŸŒ°ï¼šæ±‚0~nçš„å’Œï¼Œnä½¿ç”¨useStateå®šä¹‰
å…ˆå®šä¹‰ä¸€ä¸ªæ±‚å’Œå‡½æ•°</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">getSum</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">count</span><span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> sum <span class="token operator">=</span> <span class="token number">0</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> count<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    sum <span class="token operator">+=</span> i
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> sum
<span class="token punctuation">}</span>
</code></pre></div><p>ä½¿ç”¨useMemo</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>sum<span class="token punctuation">,</span> setSum<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token function">useMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">getSum</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">[</span>count<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>res<span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setCount</span><span class="token punctuation">(</span>count<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>count<span class="token operator">+</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>sum<span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setSum</span><span class="token punctuation">(</span>sum<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>sum<span class="token operator">+</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div><p>å¦‚æœcountä¸å‘ç”Ÿå˜åŒ–ï¼ŒuseMemoæ‰€åŒ…è£¹çš„å›è°ƒå‡½æ•°ä¸ä¼šé‡å¤æ‰§è¡Œ</p> <p>ä¸ä½¿ç”¨useMemo</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>sum<span class="token punctuation">,</span> setSum<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token function">getSum</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>res<span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setCount</span><span class="token punctuation">(</span>count<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>count<span class="token operator">+</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>sum<span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setSum</span><span class="token punctuation">(</span>sum<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>sum<span class="token operator">+</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div><p>æ­¤æ—¶getSumå‡½æ•°ä¼šè¢«é‡å¤è°ƒç”¨ï¼Œé€ æˆæå¤§çš„æ€§èƒ½æŸè€—</p> <h2 id="_5-usecontext"><a href="#_5-usecontext" class="header-anchor">#</a> 5. useContext</h2> <p>ä¸€èˆ¬ä¸createContextç»“åˆä½¿ç”¨ï¼Œç”¨æ¥è·¨çº§ç»„ä»¶ä¼ é€’æ¶ˆæ¯</p> <p>å®˜ç½‘ğŸŒ°ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createContext<span class="token punctuation">,</span> useContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> ThemeContext <span class="token operator">=</span> <span class="token function">createContext</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">MyApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>ThemeContext<span class="token punctuation">.</span>Provider value<span class="token operator">=</span><span class="token string">&quot;dark&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Form <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>ThemeContext<span class="token punctuation">.</span>Provider<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Form</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Panel title<span class="token operator">=</span><span class="token string">&quot;Welcome&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Button<span class="token operator">&gt;</span>Sign up<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Button<span class="token operator">&gt;</span>Log <span class="token keyword">in</span><span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Panel<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Panel</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> title<span class="token punctuation">,</span> children <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> theme <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>ThemeContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> className <span class="token operator">=</span> <span class="token string">'panel-'</span> <span class="token operator">+</span> theme<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>section className<span class="token operator">=</span><span class="token punctuation">{</span>className<span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span>children<span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>section<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Button</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> children <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> theme <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>ThemeContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> className <span class="token operator">=</span> <span class="token string">'button-'</span> <span class="token operator">+</span> theme<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>button className<span class="token operator">=</span><span class="token punctuation">{</span>className<span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token punctuation">{</span>children<span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>ä¸æ‡‚çš„åœ°æ–¹ï¼šå¦‚æœè·¨çº§ç»„ä»¶ä¸åœ¨ä¸€ä¸ªjsxæ–‡ä»¶å†…çš„è¯ï¼Œæ€ä¹ˆå®ç°ä¼ é€’æ¶ˆæ¯ï¼Ÿ</p> <p>ç­”æ¡ˆï¼š</p> <p>åœ¨çˆ¶ç»„ä»¶ä¸­å°†creatContextè¿™ä¸€è¡Œå¯¼å‡º</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//çˆ¶ç»„ä»¶</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> ThemeContext <span class="token operator">=</span> <span class="token function">createContext</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>å­ç»„ä»¶å†…æ¥æ”¶ï¼Œç„¶åå°±å¯ä»¥åœ¨å­ç»„ä»¶ä¸­ä½¿ç”¨äº†</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//å­ç»„ä»¶</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ThemeContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'çˆ¶ç»„ä»¶åœ°å€'</span>

<span class="token keyword">const</span> <span class="token function-variable function">Son</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> them <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>ThemeContext<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">...</span><span class="token operator">...</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_6-useeffect"><a href="#_6-useeffect" class="header-anchor">#</a> 6. useEffect</h2> <p>ç”¨äºåœ¨Reactç»„ä»¶ä¸­åˆ›å»ºä¸æ˜¯ç”±æ¸²æŸ“æœ¬èº«å¼•èµ·çš„æ“ä½œï¼Œæ¯”å¦‚å‘é€AJAXè¯·æ±‚ï¼Œæ›´æ”¹DOMç­‰ç­‰</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>å‚æ•°1æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¯ä»¥å«åšå‰¯ä½œç”¨å‡½æ•°ï¼Œåœ¨å‡½æ•°å†…éƒ¨å¯ä»¥æ”¾ç½®è¦æ‰§è¡Œçš„æ“ä½œ
å‚æ•°2æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œåœ¨æ•°ç»„é‡Œæ”¾ç½®ä¾èµ–é¡¹ï¼Œä¸åŒä¾èµ–é¡¹ä¼šå½±å“ç¬¬ä¸€ä¸ªå‚æ•°å‡½æ•°çš„æ‰§è¡Œï¼Œå½“æ˜¯ä¸€ä¸ªç©ºæ•°ç»„çš„æ—¶å€™ï¼Œå‰¯ä½œç”¨å‡½æ•°åªä¼šåœ¨ç»„ä»¶æ¸²æŸ“å®Œæ¯•ä¹‹åæ‰§è¡Œä¸€æ¬¡</p> <h2 id="_7-useref"><a href="#_7-useref" class="header-anchor">#</a> 7. useRef</h2> <h2 id="_8-useimperativehandle"><a href="#_8-useimperativehandle" class="header-anchor">#</a> 8. useImperativeHandle</h2> <p>ä¸€èˆ¬ç»“åˆforwardRefæ¥ä½¿ç”¨ï¼Œä¸»è¦ç”¨æ¥è®©çˆ¶ç»„ä»¶è®¿é—®å­ç»„ä»¶é‡Œé¢çš„å±æ€§ä»¥åŠæ–¹æ³•
ç¤ºä¾‹:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> Child <span class="token operator">=</span> <span class="token function">forwardRef</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> ref</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">useImperativeHandle</span><span class="token punctuation">(</span>ref<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      sayHello
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>child<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>


<span class="token keyword">const</span> <span class="token function-variable function">Father</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> childRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token function-variable function">click</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    childRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>study<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Child ref<span class="token operator">=</span><span class="token punctuation">{</span>childRef<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>click<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_9-uselayouteffect"><a href="#_9-uselayouteffect" class="header-anchor">#</a> 9. useLayoutEffect</h2> <p>æ˜¯useEffectçš„ä¸€ä¸ªç‰ˆæœ¬ï¼Œåœ¨æµè§ˆå™¨é‡æ–°ç»˜åˆ¶å±å¹•ä¹‹å‰è§¦å‘ï¼Œä¸useEffectçš„åŒºåˆ«ä¸»è¦æ˜¯useLayoutEffectä¼šé˜»å¡æ¸²æŸ“ï¼Œå®˜ç½‘ä¸¾å‡ºäº†ä¸€ä¸ªtoolTipçš„ä¾‹å­ï¼Œé€šè¿‡ä½¿ç”¨useLayoutEffectï¼Œåœ¨domæ›´æ–°åã€é¡µé¢æ¸²æŸ“å‰ï¼Œè·å–é«˜åº¦ï¼Œç„¶åé‡æ–°æ¸²æŸ“åˆ°åˆé€‚çš„ä½ç½®ä¸Šå»ã€‚</p> <h2 id="_10-usetransition"><a href="#_10-usetransition" class="header-anchor">#</a> 10. useTransition</h2> <h2 id="è‡ªå®šä¹‰hookå‡½æ•°"><a href="#è‡ªå®šä¹‰hookå‡½æ•°" class="header-anchor">#</a> è‡ªå®šä¹‰Hookå‡½æ•°</h2> <p>æ¦‚å¿µ:è‡ªå®šä¹‰Hookæ˜¯ä»¥useæ‰“å¤´çš„å‡½æ•°ï¼Œé€šè¿‡è‡ªå®šä¹‰Hookå‡½æ•°å¯ä»¥å®ç°é€»è¾‘çš„å°è£…å’Œå¤ç”¨</p> <ol><li>å£°æ˜ä¸€ä¸ªä»¥useæ‰“å¤´çš„å‡½æ•°</li> <li>åœ¨å‡½æ•°å†…å°è£…å¯å¤ç”¨çš„é€»è¾‘ï¼ˆåªè¦æ˜¯å¯å¤ç”¨çš„é€»è¾‘ï¼‰</li> <li>æŠŠç»„ä»¶ä¸­ç”¨åˆ°çš„çŠ¶æ€æˆ–è€…å›è°ƒreturnå‡ºå»ï¼ˆä»¥å¯¹è±¡æˆ–è€…æ•°ç»„ï¼‰</li> <li>åœ¨æ¯ä¸ªç»„ä»¶ä¸­è¦ç”¨åˆ°è¿™ä¸ªé€»è¾‘ï¼Œæ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼Œè§£æ„å‡ºæ¥çŠ¶æ€æˆ–è€…å›è°ƒè¿›è¡Œä½¿ç”¨</li></ol> <h2 id="hookä½¿ç”¨è§„åˆ™"><a href="#hookä½¿ç”¨è§„åˆ™" class="header-anchor">#</a> Hookä½¿ç”¨è§„åˆ™</h2> <ol><li>åªèƒ½åœ¨ç»„ä»¶ä¸­æˆ–è€…å…¶ä»–è‡ªå®šä¹‰Hookå‡½æ•°ä¸­è°ƒç”¨</li> <li>åªèƒ½åœ¨ç»„ä»¶çš„é¡¶å±‚è°ƒç”¨ï¼Œä¸èƒ½åµŒå¥—åœ¨ifã€forã€å…¶ä»–å‡½æ•°ä¸­</li></ol></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.92ecfa68.js" defer></script><script src="/assets/js/2.74d46d30.js" defer></script><script src="/assets/js/1.faf4e304.js" defer></script><script src="/assets/js/24.3fb61556.js" defer></script>
  </body>
</html>
